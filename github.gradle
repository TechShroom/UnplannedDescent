println "Configuring $name's GitHub manager..."

buildscript {
    repositories {
        mavenCentral()
    }
    
    
    dependencies {
        classpath 'com.jcabi:jcabi-github:0.8.1'
    }
}

import com.jcabi.github.*
import com.jcabi.github.wire.CarefulWire;
import com.jcabi.http.wire.*

ext.createGithub = { oauth ->
    def rt = null
    if (oauth == "" || oauth == null) {
        rt = new RtGithub()
    } else {
        rt = new RtGithub(oauth)
    }
    return new RtGithub(rt.entry().through(RetryWire.class).through(CarefulWire.class, 50))
}

task release(dependsOn: 'doBuild') {
    def projCoord = new Coordinates.Simple("TechShroom", "UnplannedDescent")
    def git = project.createGithub(project.oauth)
    def proj = git.repos().get(projCoord)
    def rels = proj.releases()
    def itr = rels.iterate()
    for (x in itr) {
        println x
    }
}

println "Complete."
